{% extends "base.html" %}

{# Set the page title #}
{% block title %}Cooperative Level Waiting{% endblock %}

{% block content %}
  <div class="cooperative-waiting-container">
    <h1>Please wait...</h1>
    <p>The invoice is being checked.</p>
    <div class="loader"></div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      fetch("/cooperative_process", { method: "POST" })
        .then(response => response.json())
        .then(data => {
          window.location.href = data.redirect_url;
        })
        .catch(error => console.error("Error during processing:", error));
    });
  </script>
{% endblock %}
